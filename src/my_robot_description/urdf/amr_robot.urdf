<robot name="my_amr_robot">
  
  <link name="base_footprint" />
  
  <joint name="base_joint" type="fixed">
        <parent link="base_footprint" />
        <child link="base_link" />
        <origin xyz="0 0 0.02" rpy="0 0 0"/>
  </joint>

  <link name="base_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="9" />
      <inertia ixx="0.388" ixy="0" ixz="0" iyy="0.674" iyz="0" izz="0.100" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package:/my_robot_description/mesh/base_link.STL" />
      </geometry>
      <material name=""><color rgba="0.75 0.75 0.75 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package:/my_robot_description/mesh/base_link.STL" />
      </geometry>
    </collision>
  </link>

  <link name="front_right_wheel_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="1.25" />
      <inertia ixx="0.00328" ixy="0" ixz="0" iyy="0.00506" iyz="0" izz="0.00328" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package:/my_robot_description/mesh/front_right_wheel_link.STL" />
      </geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="1.57079632679 0 0" />
      <geometry>
        <cylinder radius="0.08" length="0.07"/>
      </geometry>
    </collision>
  </link>
  <joint name="front_right_wheel_joint" type="continuous">
    <origin xyz="0.18772 -0.218 0.0005" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="front_right_wheel_link" />
    <axis xyz="0 1 0" />
    <limit effort="35" velocity="50" />
  </joint>

  <link name="front_left_wheel_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="1.25" />
      <inertia ixx="0.00328" ixy="0" ixz="0" iyy="0.00506" iyz="0" izz="0.00328" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package:/my_robot_description/mesh/front_left_wheel_link.STL" />
      </geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="1.57079632679 0 0" />
      <geometry>
        <cylinder radius="0.08" length="0.07"/>
      </geometry>
    </collision>
  </link>
  <joint name="front_left_wheel_joint" type="continuous">
    <origin xyz="0.18772 0.225 0.0005" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="front_left_wheel_link" />
    <axis xyz="0 1 0" />
    <limit effort="35" velocity="50" />
  </joint>

  <link name="back_left_wheel_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="1.25" />
      <inertia ixx="0.00328" ixy="0" ixz="0" iyy="0.00506" iyz="0" izz="0.00328" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package:/my_robot_description/mesh/back_left_wheel_link.STL" />
      </geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="1.57079632679 0 0" />
      <geometry>
        <cylinder radius="0.08" length="0.07"/>
      </geometry>
    </collision>
  </link>
  <joint name="back_left_wheel_joint" type="continuous">
    <origin xyz="-0.19428 0.225 0.0005" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="back_left_wheel_link" />
    <axis xyz="0 1 0" />
    <limit effort="35" velocity="50" />
  </joint>

  <link name="back_right_wheel_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <mass value="1.25" />
      <inertia ixx="0.00328" ixy="0" ixz="0" iyy="0.00506" iyz="0" izz="0.00328" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package:/my_robot_description/mesh/back_right_wheel_link.STL" />
      </geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="1.57079632679 0 0" />
      <geometry>
        <cylinder radius="0.08" length="0.07"/>
      </geometry>
    </collision>
  </link>
  <joint name="back_right_wheel_joint" type="continuous">
    <origin xyz="-0.19428 -0.218 0.0005" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="back_right_wheel_link" />
    <axis xyz="0 1 0" />
    <limit effort="35" velocity="50" />
  </joint>

  <gazebo reference="front_left_wheel_link">
    <mu1>2.0</mu1> <mu2>0.5</mu2> 
    <kp>10000000.0</kp> <kd>1.0</kd> <minDepth>0.001</minDepth>
    <fdir1>1 0 0</fdir1>
  </gazebo>

  <gazebo reference="front_right_wheel_link">
    <mu1>2.0</mu1> <mu2>0.5</mu2> 
    <kp>10000000.0</kp> <kd>1.0</kd> <minDepth>0.001</minDepth>
    <fdir1>1 0 0</fdir1>
  </gazebo>

  <gazebo reference="back_left_wheel_link">
    <mu1>2.0</mu1> <mu2>0.5</mu2> 
    <kp>10000000.0</kp> <kd>1.0</kd> <minDepth>0.001</minDepth>
    <fdir1>1 0 0</fdir1>
  </gazebo>

  <gazebo reference="back_right_wheel_link">
    <mu1>2.0</mu1> <mu2>0.5</mu2> 
    <kp>10000000.0</kp> <kd>1.0</kd> <minDepth>0.001</minDepth>
    <fdir1>1 0 0</fdir1>
  </gazebo>

  <link name="lidar_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/lidar_link.STL" /></geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/lidar_link.STL" /></geometry>
    </collision>
  </link>
  <joint name="lidar_joint" type="fixed">
    <origin xyz="0.03872 0.00389 0.36" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="lidar_link" />
  </joint>

  <link name="camera_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/camera_link.STL" /></geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/camera_link.STL" /></geometry>
    </collision>
  </link>
  <joint name="camera_joint" type="fixed">
    <origin xyz="0.25622 0.01 0.20" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="camera_link" />
  </joint>

  <link name="gps_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/gps_link.STL" /></geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/gps_link.STL" /></geometry>
    </collision>
  </link>
  <joint name="gps_joint" type="fixed">
    <origin xyz="0.039 0.039 0.31" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="gps_link" />
  </joint>

  <link name="Tof_F_Link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/Tof_F_Link.STL" /></geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/Tof_F_Link.STL" /></geometry>
    </collision>
  </link>
  <joint name="Tof_F_joint" type="fixed">
    <origin xyz="0.25622 0.0018543 0.10" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="Tof_F_Link" />
  </joint>

  <link name="Tof_FL_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/Tof_FL_link.STL" /></geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/Tof_FL_link.STL" /></geometry>
    </collision>
  </link>
  <joint name="Tof_FL_joint" type="fixed">
    <origin xyz="0.22272 0.18435 0.16" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="Tof_FL_link" />
  </joint>

  <link name="Tof_FR_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/Tof_FR_link.STL" /></geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/Tof_FR_link.STL" /></geometry>
    </collision>
  </link>
  <joint name="Tof_FR_joint" type="fixed">
    <origin xyz="0.21875 -0.17665 0.16" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="Tof_FR_link" />
  </joint>

  <link name="Tof_BL_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package:/my_robot_description/mesh/Tof_BL_link.STL" />
      </geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package:/my_robot_description/mesh/Tof_BL_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint name="Tof_BL_joint" type="fixed">
    <origin xyz="-0.19428 0.21469 0.10" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="Tof_BL_link" />
  </joint>

  <link name="Tof_BR_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/Tof_BR_link.STL" /></geometry>
      <material name=""><color rgba="0 0 0 1" /></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry><mesh filename="package:/my_robot_description/mesh/Tof_BR_link.STL" /></geometry>
    </collision>
  </link>
  <joint name="Tof_BR_joint" type="fixed">
    <origin xyz="-0.29478 -0.12406 0.10" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="Tof_BR_link" />
  </joint>

<!-- from here i make changing in code -->
<!-- the next code used for control in moning in gazebo -->
<gazebo>
    <plugin name='front_diff_drive' filename='libgazebo_ros_diff_drive.so'>
      <ros>
        <namespace>/</namespace>
        <remapping>cmd_vel:=cmd_vel</remapping>
        <remapping>odom:=odom</remapping>
      </ros>

      <left_joint>front_left_wheel_joint</left_joint>
      <right_joint>front_right_wheel_joint</right_joint>

      <wheel_separation>0.44</wheel_separation>
      <wheel_diameter>0.16</wheel_diameter> 
      
      <max_wheel_torque>200</max_wheel_torque>
      <max_wheel_acceleration>10.0</max_wheel_acceleration>

      <publish_odom>true</publish_odom>
      <publish_odom_tf>true</publish_odom_tf>
      <publish_wheel_tf>true</publish_wheel_tf>
      <odometry_frame>odom</odometry_frame>
      <robot_base_frame>base_link</robot_base_frame> 
    </plugin>

    <plugin name='back_diff_drive' filename='libgazebo_ros_diff_drive.so'>
      <ros>
        <namespace>/</namespace>
        <remapping>cmd_vel:=cmd_vel</remapping>
      </ros>

      <left_joint>back_left_wheel_joint</left_joint>
      <right_joint>back_right_wheel_joint</right_joint>

      <wheel_separation>0.44</wheel_separation>
      <wheel_diameter>0.16</wheel_diameter>
      
      <max_wheel_torque>200</max_wheel_torque>
      <max_wheel_acceleration>10.0</max_wheel_acceleration>

      <publish_odom>false</publish_odom>
      <publish_odom_tf>false</publish_odom_tf>
      <publish_wheel_tf>true</publish_wheel_tf>
      <odometry_frame>odom</odometry_frame>
      <robot_base_frame>base_link</robot_base_frame>
    </plugin>
  </gazebo>
<!-- this code for control in lidar scan -->

  <gazebo reference="lidar_link"> 
    <sensor name="lidar" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <always_on>true</always_on>
      <visualize>true</visualize> 
      <update_rate>10</update_rate> 
      <ray>
        <scan>
          <horizontal>
            <samples>360</samples>
            <resolution>1</resolution>
            <min_angle>0.0</min_angle>
            <max_angle>6.28319</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.12</min> <max>12.0</max> <resolution>0.015</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <plugin name="scan" filename="libgazebo_ros_ray_sensor.so">
        <ros>
          <remapping>~/out:=scan</remapping>
        </ros>
        <output_type>sensor_msgs/LaserScan</output_type>
        <frame_name>lidar_link</frame_name> 
      </plugin>
    </sensor>
  </gazebo>